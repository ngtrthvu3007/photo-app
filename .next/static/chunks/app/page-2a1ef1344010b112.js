(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6647:function(){},7644:function(e,t,o){Promise.resolve().then(o.bind(o,5621))},5621:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return j}});var s=o(7437),n=o(2265),a=o(3231),r=o(8076),l=o(8240),i=o(7876),d=o(8710),c=o(1071),p=o(6648),m=o(9930),h=o.n(m),x=o(357);h().config();let u={app:3e3,db:{host:"localhost",dbport:"5432",name:"photo-app",user:x.env.PSQL_USER,password:x.env.PSQL_PASSWORD},domain:"http://localhost:3000"};var f={development:u,test:{app:3002,db:{host:x.env.PSQL_LIVE_HOST,dbport:"5432",name:x.env.PSQL_LIVE_NAME,user:x.env.PSQL_LIVE_USER,password:x.env.PSQL_LIVE_PASSWORD},domain:""},production:{app:3001,db:{host:x.env.PSQL_LIVE_HOST,dbport:"5432",name:x.env.PSQL_LIVE_NAME,user:x.env.PSQL_LIVE_USER,password:x.env.PSQL_LIVE_PASSWORD},domain:""}}.production;function j(){let[e,t]=(0,n.useState)([]),[o,m]=(0,n.useState)([]),[h,x]=(0,n.useState)({type:"",message:""}),u=async()=>{let e=await fetch("".concat(f.domain,"/api/photos"));t(await e.json())},j=async(e,t)=>{(await fetch("".concat(f.domain,"/api/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({photoId:e,content:t})})).ok&&u()},S=async e=>{if(e.photo){let t=new FormData;t.append("file",e.photo.fileList[0].originFileObj);try{(await fetch("".concat(f.domain,"/api/upload"),{method:"POST",body:t})).ok&&(m([]),x({type:"success",message:"Upload Photo Success"}),u())}catch(e){x({type:"error",message:"*Error uploading photo"})}}else x({type:"error",message:"*Please select photo"})};return(0,n.useEffect)(()=>{u()},[]),(0,s.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",padding:20},children:[(0,s.jsx)("div",{className:"text-center my-5 text-xl font-bold",children:"Photo App - Upload Your Photo"}),(0,s.jsxs)(a.Z,{onFinish:S,style:{paddingBlock:10,display:"flex",alignItems:"center"},labelCol:{span:6},wrapperCol:{span:14},children:[(0,s.jsx)(a.Z.Item,{name:"photo",wrapperCol:{offset:6},children:(0,s.jsx)(r.Z,{beforeUpload:()=>!1,fileList:o,onChange:e=>{let{fileList:t}=e;m(t)},children:(0,s.jsx)(l.ZP,{icon:(0,s.jsx)(c.Z,{}),children:"Select Your Photo"})})}),(0,s.jsx)(a.Z.Item,{name:"photo",wrapperCol:{offset:6},children:(0,s.jsx)("div",{className:"".concat("error"===h.type?"text-red-500":"text-green-500"),children:h.message})}),(0,s.jsx)(a.Z.Item,{wrapperCol:{offset:6},style:{paddingBlock:10,marginLeft:"2rem"},children:(0,s.jsx)(l.ZP,{type:"primary",htmlType:"submit",children:"Upload"})})]}),(0,s.jsx)(i.Z,{grid:{gutter:16,column:1},dataSource:e,renderItem:e=>(0,s.jsx)(i.Z.Item,{children:(0,s.jsxs)("div",{className:" border rounded p-2 ",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-[200px] h-[200px] relative",children:(0,s.jsx)(p.default,{src:e.imageUrl,alt:"Uploaded photo",style:{objectFit:"cover"},fill:!0,className:"rounded",sizes:"100vw"})}),(0,s.jsxs)("div",{className:"ml-8 text-center ",children:[(0,s.jsx)("div",{className:"text-lg font-semibold",children:(0,s.jsx)("h1",{children:"Comments of photo"})}),(0,s.jsx)(i.Z,{locale:{emptyText:"No Comments"},dataSource:e.comments,renderItem:e=>(0,s.jsx)(i.Z.Item,{children:e.content})})]})]}),(0,s.jsx)("div",{className:"mt-5",children:(0,s.jsxs)(a.Z,{onFinish:t=>j(e.id,t.comment),children:[(0,s.jsx)(a.Z.Item,{style:{marginBottom:"5px"},name:"comment",children:(0,s.jsx)(d.Z,{placeholder:"Add a comment",allowClear:!0})}),(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(l.ZP,{type:"primary",htmlType:"submit",children:"Add Comment"})})]})})]})})})]})}}},function(e){e.O(0,[218,445,971,23,744],function(){return e(e.s=7644)}),_N_E=e.O()}]);