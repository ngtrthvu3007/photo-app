"use strict";(()=>{var e={};e.id=998,e.ids=[998],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},7817:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>f,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{POST:()=>m});var o=r(9303),i=r(8716),p=r(670),n=r(7070),u=r(3493);let s=require("fs/promises");var l=r(1017),d=r.n(l);async function m(e){let t=(await e.formData()).get("file");if(!t)return n.NextResponse.json({error:"No file uploaded"},{status:400});let r=await t.arrayBuffer(),a=Buffer.from(r),o=`${Date.now()}-${Math.round(1e9*Math.random())}`,i=`${t.name.split(".")[0]}-${o}${d().extname(t.name)}`,p=d().join(process.cwd(),"public","uploads");await (0,s.writeFile)(d().join(p,i),a);let l=`/uploads/${i}`,m=await u._.photo.create({data:{imageUrl:l}});return n.NextResponse.json(m)}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\RoadToTheNinja\\Nextjs\\photo-app\\app\\api\\upload\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:x}=c,g="/api/upload/route";function v(){return(0,p.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},3493:(e,t,r)=>{r.d(t,{_:()=>o});let a=require("@prisma/client"),o=global.prisma||new a.PrismaClient({log:["query"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972],()=>r(7817));module.exports=a})();